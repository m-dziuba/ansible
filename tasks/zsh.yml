- name: Setup zsh
  tags:
  - install
  - dotfiles
  - zsh
  - productivity
  block:
  - name: Install zsh
    community.general.pacman:
      name: zsh
  - name: Install python-pexpect
    community.general.pacman:
      name: python-pexpect
  - name: Set enviroment vars for oh-my-zsh installation
    shell: CHSH=yes
  - name: Set enviroment vars for oh-my-zsh installation
    shell: RUNZSH=yes
  - name: Install oh-my-zsh
    become_user: "{{ lookup('env', 'USER') }}"
    shell: sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)" "" --unattended 
  - name: Install the zsh plugin for autosuggestions
    community.general.pacman:
      name: zsh-autosuggestions
